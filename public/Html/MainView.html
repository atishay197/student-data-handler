<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <title>Send Requests</title>
</head>
<body>
<br>
<br>
<div class="row">
    <div class="col-md-2">
        New Student
    </div>
    <div class="col-md-3">
        <script>
            function submitform() {
                var fields = {};
                $("form.submit").find("input").each(function() {
                    fields[this.name] = $(this).val();
                });
                console.log(fields);
                var redirectURL;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "http://localhost:9000/storeData", true);
                xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                xhr.onload = function () {
                    if (xhr.readyState === xhr.DONE) {
                        if (xhr.status === 200) {
                            console.log(xhr.responseText);
                            var objJSON = JSON.parse(xhr.responseText);
                            redirectURL = objJSON.finalURL;
                            window.open(redirectURL,"_self");
                        }
                    }
                };
                xhr.send(JSON.stringify(fields));
            }
        </script>
        <form class="submit" action = "POST">
            <div class="row">
                <div class="col-md-3">
                    Name
                    </div>
                <div class="col-md-3">
                    <input name="name"><br>
                    </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    College
                </div>
                <div class="col-md-3">
                    <input name="college"><br>
                </div>
            </div>
            <p>
            <div class="row">
                <div class="col-md-10">
                    <button type="button" onclick="submitform()" class="btn btn-primary btn-block">Store Data</button>
                </div>
            </div>
        </form>
    </div>
    <div class="col-md-7">
        Data printed here... Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data
    </div>
</div>


<p>
<div class="row">
    <div class="col-md-2">
        Student Details
    </div>
    <div class="col-md-3">
        <script>
        function getData() {
            var fields = {};
            $("form.getData").find("input").each(function() {
                fields[this.name] = $(this).val();
            });
            console.log(fields);
            var redirectURL;
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "http://localhost:9000/getData", true);
            xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
            xhr.onload = function () {
                if (xhr.readyState === xhr.DONE) {
                    if (xhr.status === 200) {
                        console.log(xhr.responseText);
                        var objJSON = JSON.parse(xhr.responseText);
                        redirectURL = objJSON.finalURL;
                        var details = JSON.parse(objJSON.response);
                        var urlNew = Object.keys(details).map(function(k) {
                            return encodeURIComponent(k) + '=' + encodeURIComponent(details[k])
                        }).join('&')
                        redirectURL = redirectURL + '?' + urlNew;
                        console.log(redirectURL);
                        window.open(redirectURL,"_self");
                    }
                }
            };
            xhr.send(JSON.stringify(fields));
        }
        </script>
        <form class="getData">
            <div class="row">
                <div class="col-md-3">
                    Name
                </div>
                <div class="col-md-3">
                    <input name="name"><br>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    Roll
                </div>
                <div class="col-md-3">
                    <input name="roll"><br>
                </div>
            </div>
            <p>
            <div class="row">
                <div class="col-md-10">
                    <button type="button" onclick="getData()" class="btn btn-primary btn-block">Get Data</button>
                </div>
            </div>
        </form>
    </div>
    <div class="col-md-7">
        Data printed here...
    </div>
</div>

<p>
<div class="row">
    <div class="col-md-2">
        Teacher Grading
    </div>
    <div class="col-md-3">
        <script>
            function submitGrade() {
                var fields = {};
                $("form.teacher").find("input").each(function() {
                    fields[this.name] = $(this).val();
                });
                console.log(fields);
                var redirectURL;
                var xhr = new XMLHttpRequest();
                xhr.open("POST", "http://localhost:9000/submitGrade", true);
                xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
                xhr.onload = function () {
                    if (xhr.readyState === xhr.DONE) {
                        if (xhr.status === 200) {
                            console.log(xhr.responseText);
                            var objJSON = JSON.parse(xhr.responseText);
                            redirectURL = objJSON.finalURL;
                            window.open(redirectURL,"_self");
                        }
                    }
                };
                xhr.send(JSON.stringify(fields));
            }
        </script>
        <form class="teacher">

            <div class="row">
                <div class="col-md-3">
                    TeacherID
                </div>
                <div class="col-md-3">
                    <input name="teacherId"><br>
                </div>
            </div>
            <div class="row">
                <div class="col-md-3">
                    Roll
                </div>
                <div class="col-md-3">
                    <input name="roll"><br>
                </div>
            </div>
            <p>
            <div class="row">
                <div class="col-md-10">
                    <button type="button" onclick="submitGrade()" class="btn btn-primary btn-block">Grade Student</button>
                </div>
            </div>
        </form>
    </div>
    <div class="col-md-7">
        Data printed here... Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data Data
    </div>
</div>


<p>
<div class="row">
    <div class="col-md-6">
        <form method="GET" action="http://localhost:9000/showAllData">
            <button class="btn btn-primary btn-block">ShowAllData</button>
        </form>
    </div>

    <div class="col-md-6">
        <form method="GET" action="http://localhost:9000/showAllDatas">
            <button class="btn btn-primary btn-block">ShowAllData-DB</button>
        </form>
    </div>
</div>

</body>
</html>